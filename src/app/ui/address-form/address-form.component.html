<div [formGroup]="form()">
    <div>
        <mat-form-field>
            <mat-label>Address name</mat-label>
            <input matInput [id]="'address_name-' + index" type="string" formControlName="name">
            <mat-error>Required</mat-error>
        </mat-form-field>
    </div>

    <div>
        <mat-form-field>
            <mat-select formControlName="country">
                @for(country of countries(); track country.id; let index = $index) {
                    <mat-option [value]="country">{{country.name}}</mat-option>
                }
            </mat-select>
            <mat-error>Required</mat-error>
        </mat-form-field>
    </div>

    <div>
        <mat-form-field>
            <mat-label>Select city</mat-label>
            <mat-select formControlName="city">
                @for(city of cities(); track city.id) {
                    <mat-option [value]="city">{{city.name}}</mat-option>
                }
            </mat-select>
            <mat-error>Required</mat-error>
        </mat-form-field>

        <button mat-flat-button type="button" class="info-button" [disabled]="!countries().length" (click)="onAddCity()">Add city</button>
    </div>

    <div>
        <mat-form-field>
            <mat-label>Street</mat-label>
            <input matInput [id]="'street-' + index" type="string" formControlName="street">
            <mat-error>Required</mat-error>
        </mat-form-field>
    </div>

</div>

<button mat-flat-button type="button" class="warning-button" [disabled]="!canRemove()" (click)="removeAddress()">Remove address</button>